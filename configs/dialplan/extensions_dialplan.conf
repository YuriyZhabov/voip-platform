; Диалплан для VoIP системы с LiveKit
; Этот файл содержит диалплан для обработки входящих звонков

; Диалплан для входящих звонков от Novofon
[from-novofon]
exten => 79952227978,1,NoOp(Incoming call from Novofon to ${EXTEN})
 same => n,Set(CHANNEL(hangup_handler_push)=hangup-handler,s,1)
 same => n,Answer()
 same => n,Wait(1)
 same => n,Stasis(livekit-agent,incoming,${CALLERID(num)})
 same => n,Hangup()

; Обработчик завершения звонка
[hangup-handler]
exten => s,1,NoOp(Call hangup handler)
 same => n,Return()

; Диалплан для тестовых звонков
[from-internal-custom]
exten => 9999,1,NoOp(Test call to ${EXTEN})
 same => n,Answer()
 same => n,Playback(demo-congrats)
 same => n,Hangup()

; Дополнительные номера для тестирования
exten => 8888,1,NoOp(Echo test call)
 same => n,Answer()
 same => n,Echo()
 same => n,Hangup()